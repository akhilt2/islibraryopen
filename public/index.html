<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IS LIBRARY OPEN</title>
  <style>
    * {
      font-family: sans-serif;
    }

    html,
    body {
      min-width: 390px;
    }

    body {
      margin: 0;
      padding: 0;
      background-color: white;
      height: 100vh;
      width: 100vw;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .admin-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      position: absolute;
      bottom: 56px;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
    }

    .admin {
      font-size: 18px;
      font-weight: 600;
      letter-spacing: -0.04rem;
      color: rgba(255, 255, 255, 0.9);
      text-align: center;
    }

    .last-update {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.8);
      text-align: center;
      line-height: 1.3;
    }
  </style>

</head>

<body>

  <a href="https://gitlab.com/Akhil_T/islibraryopen" target="_blank">
	  <img style="position:absolute;top:0;right:0;width:10vv;height:10vh;cursor:pointer;" title="View source code in GitLab" alt="GitLab Logo" src="https://images.ctfassets.net/xz1dnu24egyd/5VNS0QDlyHhsJnrAv9uO53/e4c4ade0e9a25c33c13cda7b5c6be67c/gitlab-logo-700.svg"/>
  </a>
  <svg id="open-svg" style="display: none;" width="352" height="180" viewBox="0 0 352 180" fill="none" xmlns="http://www.w3.org/2000/svg">
  <text x="50%" y="30" font-size="35" dominant-baseline="middle" text-anchor="middle" fill="white">LIBRARY</text>
    <rect x="2.65608" y="72.6522" width="347.307" height="105.103" rx="52.5515" stroke="white" stroke-opacity="0.8" stroke-width="3.33268" />
    <circle cx="54.8679" cy="125.204" r="31.6604" fill="url(#paint1_linear_318_747)" />
    <path
      d="M129.901 158.297C121.399 158.297 115.114 155.412 111.045 149.643C107.037 143.874 105.033 135.797 105.033 125.412C105.033 115.027 107.037 106.951 111.045 101.181C115.114 95.4121 121.399 92.5275 129.901 92.5275C138.403 92.5275 144.658 95.4121 148.666 101.181C152.735 106.951 154.769 115.027 154.769 125.412C154.769 135.797 152.735 143.874 148.666 149.643C144.658 155.412 138.403 158.297 129.901 158.297ZM129.901 147.274C133.788 147.274 136.46 145.847 137.917 142.993C139.435 140.078 140.194 136.04 140.194 130.878V119.855C140.194 114.754 139.435 110.776 137.917 107.922C136.46 105.007 133.788 103.55 129.901 103.55C126.014 103.55 123.312 105.007 121.794 107.922C120.336 110.776 119.607 114.754 119.607 119.855V130.969C119.607 136.07 120.336 140.078 121.794 142.993C123.312 145.847 126.014 147.274 129.901 147.274ZM162.295 157.204V93.6206H186.89C189.987 93.6206 192.75 94.1064 195.179 95.0781C197.608 95.989 199.643 97.3251 201.282 99.0862C202.983 100.847 204.258 102.973 205.108 105.463C205.959 107.953 206.384 110.746 206.384 113.843C206.384 116.94 205.959 119.734 205.108 122.224C204.258 124.714 202.983 126.839 201.282 128.6C199.643 130.362 197.608 131.728 195.179 132.7C192.75 133.61 189.987 134.066 186.89 134.066H176.05V157.204H162.295ZM176.05 123.044H183.428C186.647 123.044 188.863 122.436 190.078 121.222C191.353 120.007 191.991 118.003 191.991 115.21V112.477C191.991 109.683 191.353 107.679 190.078 106.465C188.863 105.25 186.647 104.643 183.428 104.643H176.05V123.044ZM215.457 157.204V93.6206H256.085V104.825H229.121V119.4H255.174V130.604H229.121V145.999H256.085V157.204H215.457ZM279.187 114.936H278.185V157.204H266.525V93.6206H282.922L297.406 135.888H298.408V93.6206H310.068V157.204H293.671L279.187 114.936Z"
      fill="url(#paint2_linear_318_747)" />
    <defs>
      <linearGradient id="paint0_linear_318_747" x1="176.31" y1="0.769043" x2="176.31" y2="43.769" gradientUnits="userSpaceOnUse">
        <stop stop-color="white" stop-opacity="0.96" />
        <stop offset="0.505" stop-color="white" stop-opacity="0.93" />
        <stop offset="1" stop-color="white" stop-opacity="0.85" />
      </linearGradient>
      <linearGradient id="paint1_linear_318_747" x1="54.8679" y1="93.5435" x2="54.8679" y2="156.864" gradientUnits="userSpaceOnUse">
        <stop stop-color="white" stop-opacity="0.96" />
        <stop offset="0.505" stop-color="white" stop-opacity="0.93" />
        <stop offset="1" stop-color="white" stop-opacity="0.85" />
      </linearGradient>
      <linearGradient id="paint2_linear_318_747" x1="209.081" y1="93.2036" x2="209.081" y2="157.204" gradientUnits="userSpaceOnUse">
        <stop stop-color="white" stop-opacity="0.96" />
        <stop offset="0.505" stop-color="white" stop-opacity="0.93" />
        <stop offset="1" stop-color="white" stop-opacity="0.85" />
      </linearGradient>
    </defs>
  </svg>
  <svg id="closed-svg" style="display: none;" width="351" height="138" viewBox="0 0 351 138" fill="none" xmlns="http://www.w3.org/2000/svg">
  <text x="50%" y="30" font-size="35" dominant-baseline="middle" text-anchor="middle" fill="white">LIBRARY</text>
    <rect x="1.28078" y="55.7588" width="347.463" height="80.5926" rx="40.2963" stroke="white" stroke-opacity="0.8" stroke-width="2.56156" />
    <circle cx="41.412" cy="96.0551" r="24.3349" fill="url(#paint1_linear_318_749)" />
    <path
      d="M99.8797 121.395C93.3449 121.395 88.4904 119.202 85.3163 114.814C82.189 110.38 80.6253 104.148 80.6253 96.1196C80.6253 88.0911 82.189 81.883 85.3163 77.4953C88.4904 73.0609 93.3449 70.8438 99.8797 70.8438C102.4 70.8438 104.617 71.1938 106.531 71.894C108.492 72.5475 110.172 73.481 111.572 74.6946C112.973 75.9083 114.116 77.3786 115.003 79.1057C115.937 80.8327 116.66 82.7698 117.174 84.917L107.371 87.2975C107.091 86.1306 106.765 85.057 106.391 84.0768C106.018 83.0966 105.528 82.2564 104.921 81.5562C104.361 80.8561 103.637 80.3193 102.75 79.9459C101.91 79.5258 100.883 79.3157 99.6696 79.3157C96.8223 79.3157 94.7919 80.436 93.5782 82.6765C92.4113 84.8703 91.8278 87.9277 91.8278 91.8486V100.391C91.8278 104.311 92.4113 107.392 93.5782 109.633C94.7919 111.827 96.8223 112.923 99.6696 112.923C102.097 112.923 103.847 112.177 104.921 110.683C106.041 109.189 106.858 107.275 107.371 104.942L117.174 107.322C116.66 109.469 115.937 111.406 115.003 113.133C114.116 114.861 112.973 116.354 111.572 117.615C110.172 118.828 108.492 119.762 106.531 120.415C104.617 121.069 102.4 121.395 99.8797 121.395ZM124.778 120.555V71.684H135.35V111.943H156.355V120.555H124.778ZM179.923 121.395C173.389 121.395 168.557 119.178 165.43 114.744C162.349 110.309 160.809 104.101 160.809 96.1196C160.809 88.1377 162.349 81.9296 165.43 77.4953C168.557 73.0609 173.389 70.8438 179.923 70.8438C186.458 70.8438 191.266 73.0609 194.347 77.4953C197.474 81.9296 199.038 88.1377 199.038 96.1196C199.038 104.101 197.474 110.309 194.347 114.744C191.266 119.178 186.458 121.395 179.923 121.395ZM179.923 112.923C182.911 112.923 184.965 111.827 186.085 109.633C187.252 107.392 187.835 104.288 187.835 100.321V91.8486C187.835 87.9277 187.252 84.8703 186.085 82.6765C184.965 80.436 182.911 79.3157 179.923 79.3157C176.936 79.3157 174.859 80.436 173.692 82.6765C172.572 84.8703 172.012 87.9277 172.012 91.8486V100.391C172.012 104.311 172.572 107.392 173.692 109.633C174.859 111.827 176.936 112.923 179.923 112.923ZM219.735 121.395C215.628 121.395 212.057 120.719 209.023 119.365C205.989 118.011 203.538 116.168 201.671 113.834L207.762 107.112C209.536 109.073 211.473 110.52 213.574 111.453C215.721 112.387 217.891 112.853 220.085 112.853C222.606 112.853 224.52 112.293 225.827 111.173C227.134 110.053 227.787 108.442 227.787 106.342C227.787 104.615 227.274 103.308 226.247 102.421C225.266 101.534 223.586 100.904 221.205 100.531L216.094 99.6904C211.707 98.9435 208.533 97.3332 206.572 94.8593C204.612 92.3387 203.631 89.2813 203.631 85.6872C203.631 80.9728 205.172 77.3319 208.253 74.7647C211.333 72.1507 215.651 70.8438 221.205 70.8438C224.986 70.8438 228.277 71.4272 231.078 72.5942C233.878 73.7611 236.142 75.3481 237.869 77.3553L231.918 84.0068C230.611 82.5598 229.071 81.4395 227.297 80.646C225.523 79.8058 223.516 79.3857 221.276 79.3857C216.561 79.3857 214.204 81.3228 214.204 85.1971C214.204 86.8774 214.717 88.1377 215.744 88.9779C216.818 89.8181 218.545 90.4483 220.925 90.8684L226.037 91.7786C230.004 92.4787 233.062 93.9724 235.209 96.2596C237.356 98.5468 238.429 101.627 238.429 105.502C238.429 107.789 238.033 109.913 237.239 111.873C236.446 113.787 235.255 115.467 233.668 116.914C232.081 118.315 230.121 119.412 227.787 120.205C225.5 120.999 222.816 121.395 219.735 121.395ZM245.684 120.555V71.684H276.911V80.2959H256.186V91.4985H276.211V100.11H256.186V111.943H276.911V120.555H245.684ZM285.145 71.684H300.899C307.481 71.684 312.358 73.7844 315.532 77.9854C318.707 82.1864 320.294 88.2311 320.294 96.1196C320.294 104.008 318.707 110.053 315.532 114.254C312.358 118.455 307.481 120.555 300.899 120.555H285.145V71.684ZM300.199 112.293C303.326 112.293 305.614 111.29 307.061 109.283C308.508 107.275 309.231 104.358 309.231 100.531V91.6385C309.231 87.8577 308.508 84.9637 307.061 82.9565C305.614 80.9494 303.326 79.9459 300.199 79.9459H295.508V112.293H300.199Z"
      fill="url(#paint2_linear_318_749)" />
    <defs>
      <linearGradient id="paint0_linear_318_749" x1="175.012" y1="0.558594" x2="175.012" y2="33.5586" gradientUnits="userSpaceOnUse">
        <stop stop-color="white" stop-opacity="0.96" />
        <stop offset="0.505" stop-color="white" stop-opacity="0.93" />
        <stop offset="1" stop-color="white" stop-opacity="0.85" />
      </linearGradient>
      <linearGradient id="paint1_linear_318_749" x1="41.412" y1="71.7202" x2="41.412" y2="120.39" gradientUnits="userSpaceOnUse">
        <stop stop-color="white" stop-opacity="0.96" />
        <stop offset="0.505" stop-color="white" stop-opacity="0.93" />
        <stop offset="1" stop-color="white" stop-opacity="0.85" />
      </linearGradient>
      <linearGradient id="paint2_linear_318_749" x1="200.201" y1="71.5552" x2="200.201" y2="120.555" gradientUnits="userSpaceOnUse">
        <stop stop-color="white" stop-opacity="0.96" />
        <stop offset="0.505" stop-color="white" stop-opacity="0.93" />
        <stop offset="1" stop-color="white" stop-opacity="0.85" />
      </linearGradient>
    </defs>
  </svg>

  <div class="admin-wrapper">
    <span class="admin">Library Admin</span>
    <span class="last-update">Last udpated: 12:32PM, Today</span>
  </div>

  <script>
    const body = document.body;
    const openSvg = document.getElementById('open-svg');
    const closedSvg = document.getElementById('closed-svg');
    const admin = document.querySelector('.admin');
    const lastUpdate = document.querySelector('.last-update');
    const adminWrapper = document.querySelector('.admin-wrapper');

    function formatDate(date) {
      date = new Date(date);

      const today = new Date();
      const yesterday = new Date(today);
      yesterday.setDate(today.getDate() - 1);

      const formatter = new Intl.DateTimeFormat('en-IN', {
        month: 'short',
        day: 'numeric',
        year: 'numeric'
      });

      const timeFormatter = new Intl.DateTimeFormat('en-IN', {
        hour: 'numeric',
        minute: 'numeric',
        hour12: true
      });

      if (date.toDateString() === today.toDateString()) {
        return timeFormatter.format(date) + ", Today";
      } else if (date.toDateString() === yesterday.toDateString()) {
        return timeFormatter.format(date) + ", Yesterday";
      } else {
        return timeFormatter.format(date) + ", " + formatter.format(date).replace(',', '');
      }
    }

    function fetchStoreState() {
      fetch("/libraryopen/status")
        .then((response) => response.json())
        .then(({ libraryStatus }) => {

          console.log(libraryStatus);

          admin.innerText = libraryStatus.currAdmin;
			lastUpdate.innerText = libraryStatus?.isOpen?  `Library is open till ${formatDate(libraryStatus.openTill)}` : `Last updated: ${formatDate(libraryStatus.lastUpdated)}`;
          adminWrapper.style.display = 'flex';

          body.style.background = libraryStatus?.isOpen
            ? "linear-gradient(to bottom, rgba(0, 216, 73, 1),rgba(5, 118, 37, 1))"
            : "linear-gradient(to bottom,rgba(216, 0, 0, 1),rgba(118, 5, 5, 1))";

          openSvg.style.display = libraryStatus?.isOpen ? 'inline-block' : 'none';
          closedSvg.style.display = !(libraryStatus?.isOpen) ? 'inline-block' : 'none';
        })
        .catch((error) => {
          console.error("Error:", error);
        });
    }

    window.onload = fetchStoreState;
  </script>
</body>

</html>
